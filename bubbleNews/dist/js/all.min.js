angular.module("myApp",["ionic","myApp.httpFactory","myApp.slideBox","myApp.tabs","myApp.news","myApp.search","myApp.live","myApp.topic","myApp.personal"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,o,t){t.views.transition("ios"),t.tabs.position("bottom"),t.navBar.alignTitle("center"),t.tabs.style("standard"),e.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html",controller:"tabsController"}),o.otherwise("tabs/news")}]),angular.module("myApp.live",[]).config(["$stateProvider",function(e){e.state("tabs.live",{url:"/live",views:{"tabs-live":{templateUrl:"live.html",controller:"liveController"}}})}]).controller("liveController",["$scope",function(e){}]),angular.module("myApp.news",[]).config(["$stateProvider",function(e){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"news.html",controller:"newsController"}}})}]).controller("newsController",["$scope","$ionicPopup","HttpFactory","$ionicModal","$ionicLoading","$http",function(e,o,t,n,l,r){n.fromTemplateUrl("modal.html",{scope:e,animation:"slide-in-up"}).then(function(o){e.modal=o,console.log(o)}),e.openModal=function(){e.modal.show()},e.closeModal=function(){e.modal.hide()},e.scrollItems=["头条","要闻","娱乐","体育","网易号","郑州","视频","财经","科技","汽车","时尚","图片","直播","热点","跟帖","房产","股票","家居","独家","游戏"],e.news={newsArray:"",adsArray:[]};var i="http://c.3g.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset=0&size=10";t.getData(i).then(function(o){e.news.newsArray=o,e.news.adsArray=o[0].ads});var a=0;e.isShowInfinite=!0,e.loadMore=function(o){"上拉"==o&&(a+=10);var n="http://c.3g.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset=0&size="+a;t.getData(n).then(function(o){o.splice(0,1),console.log(o),e.items=o,e.$broadcast("scroll.refreshComplete"),e.items.length<8?e.isShowInfinite=!1:(e.isShowInfinite=!0,e.$broadcast("scroll.infiniteScrollComplete"))},function(e){})},e.doSome=function(){console.log("正在下拉！")},e.doRefresh=function(){a=10,e.loadMore()}}]),angular.module("myApp.personal",[]).config(["$stateProvider",function(e){e.state("tabs.personal",{url:"/personal",views:{"tabs-personal":{templateUrl:"personal.html",controller:"personalController"}}})}]).controller("personalController",["$scope",function(e){}]),angular.module("myApp.search",[]).config(["$stateProvider",function(e){e.state("tabs.search",{url:"/search",views:{"tabs-news":{templateUrl:"search.html",controller:"searchController"}}})}]).controller("searchController",["$scope",function(e){}]),angular.module("myApp.tabs",[]).controller("tabsController",["$scope",function(e){e.$on("$stateChangeSuccess",function(e,o,t){var n=function(e){document.getElementsByTagName("body")[0];document.title=e;var o=document.createElement("iframe");o.setAttribute("src","../empty.png"),o.addEventListener("load",function(){setTimeout(function(){document.body.removeChild(o)})}),document.body.appendChild(o)};switch(o.url){case"/news":n("新闻");break;case"/live":n("直播");break;case"/topic":n("话题");break;case"/personal":n("我")}})}]),angular.module("myApp.topic",[]).config(["$stateProvider",function(e){e.state("tabs.topic",{url:"/topic",views:{"tabs-topic":{templateUrl:"topic.html",controller:"topicController"}}})}]).controller("topicController",["$scope",function(e){}]),angular.module("myApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,o){return{getData:function(t,n){if(t){var l=o.defer();return t="http://localhost:3000/?myUrl="+encodeURIComponent(t),n=n?n:"GET",e({url:t,method:n,timeout:2e4}).then(function(e){e=e.data,e=e[Object.keys(e)[0]],l.resolve(e)},function(e){l.reject(e)}),l.promise}}}}]),angular.module("myApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},template:'<div class="topCarousel"><ion-slide-box delegate-handle="topCarouselSlideBox" on-slide-changed="slideHasChanged($index)" auto-play="true" slide-interval="1000" show-pager="true" does-continue="true" ng-if="isShowSlideBox" ng-mouseenter="drag()" ng-mouseleave="leave()"> <ion-slide ng-repeat="ads in sourceArray track by $index" ng-click="goToDetailView($index)"><img ng-src="{{ads.imgsrc}}" class="topCarouselImg"></ion-slide> </ion-slide-box><div class="slideBottomDiv"></div></div>',controller:["$scope","$element","$ionicSlideBoxDelegate",function(e,o,t){e.goToDetailView=function(e){console.log("进入详情页"+e)};o[0].lastElementChild;e.$watch("sourceArray",function(o,t){o&&o.length&&(e.isShowSlideBox=!0)}),e.slideHasChanged=function(e){},e.drag=function(){t.$getByHandle("mainSlideBox").enableSlide(!1)},e.leave=function(){t.$getByHandle("mainSlideBox").enableSlide(!0)}}],replace:!0,link:function(e,o,t){}}}]);